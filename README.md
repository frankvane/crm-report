# 重构目标与核心原则

## 一、重构目标

- **系统性**：构建结构清晰、职责分明的可视化报表设计器，便于团队协作和后续维护。
- **可扩展性**：支持灵活扩展新组件、新功能，满足多变的业务需求。
- **低代码能力**：让非开发人员也能通过拖拽、配置快速搭建报表页面。
- **高性能**：即使在大规模组件场景下也能流畅运行。
- **良好用户体验**：交互友好，操作直观，反馈及时。
- **易维护性**：代码规范、类型安全、易于测试和重构。

## 二、核心原则

- **第一性原理**：所有设计和实现都回归本质需求，避免无谓复杂度。
- **单一职责原则（SRP）**：每个模块/组件只做一件事，且做好。
- **KISS 原则**：保持简单，避免过度设计。
- **DRY 原则**：避免重复代码，提取通用逻辑。
- **SOLID 原则**：面向对象五大原则，提升可维护性和可扩展性。
- **YAGNI 原则**：只实现当前需要的功能，避免过早优化和无用功能。
- **类型安全**：充分利用 TypeScript，提升代码健壮性。
- **工程规范**：遵循团队代码规范、注重文档和注释。

---

# 报表设计器

## 主要特性

- 画布区域支持多选、框选、拖拽、缩放、旋转等操作
- 属性面板支持基础属性、标准属性、数据绑定等多种配置
- 组件支持自动生成唯一 name
- 支持 Ant Design、Zustand 等主流技术栈

## JSON 字段编辑说明

属性面板中如表格（table）等组件的 `columns`、`dataSource` 等 json 类型字段，现已采用多行文本框（Input.TextArea）进行编辑：

- 支持直接粘贴、编辑合法的 JSON 内容
- 输入内容会自动尝试解析为 JSON，只有合法 JSON 才会生效
- 如需切换为可视化 JSON 编辑器，可参考注释或将 renderField 方法中的 json case 替换为 json-edit-react 或 jsoneditor 组件

## 开发与提交

1. 安装依赖：
   ```bash
   npm install
   # 或 yarn install
   ```
2. 启动开发环境：
   ```bash
   npm start
   # 或 yarn start
   ```
3. 代码提交与推送：
   ```bash
   git add .
   git commit -m "feat: 属性面板json字段支持多行文本编辑"
   git push
   ```

---

如需更多自定义或集成第三方 JSON 编辑器，请参考 `src/components/report/ReportDesigner/components/PropertyPanel/index.tsx` 中 renderField 方法的实现。
